<!--pages/workOrderListCard.wxml-->
<!-- 工单名称、工单级别、工单类型、产品名称、生产数量、生产状态、备注 -->
<view wx:if="{{ from !== 'dashboard' }}" class="work-box">
  <view class="flex justify-between">
    <view class="text-cut">
      <!-- <text>工单名称：</text> -->
      <van-tag color="{{ typeColorMap[item.type] }}" text-color="{{ typeTextColorMap[item.type] }}">
        <view style="font-weight: bolder">{{ typeMap[item.type] }}</view>
      </van-tag>
      <text class="title">{{ item.name }}</text>
    </view>
    <view class="status">
      <!-- <text>工单级别：</text> -->
      <van-tag type="{{ gradeTypeMap[item.grade] }}">
        <view style="font-weight: bolder">{{ gradeMap[item.grade] }}</view>
      </van-tag>
    </view>
  </view>
  <view class="text-cut margin-top-sm">
    <text>工单编号：</text>
    <text class="sub-text">{{ item.code }}</text>
  </view>
  <view class="text-cut margin-top-sm">
    <text>产品名称：</text>
    <text class="sub-text">{{ item.productInfo.name }}</text>
  </view>
  <!-- <view class="text-cut margin-top-sm">
    <text>规格型号：</text>
    <text class="sub-text">{{ item.productInfo.spec }}</text>
  </view> -->
  <view class="flex justify-between margin-top-sm">
    <view class="text-cut">
      <text>数量：</text>
      <text class="sub-text">{{ item.count }}</text>
    </view>
    <view>
      <text>截止时间：</text>
      <text class="sub-text">{{ item.needDate }}</text>
    </view>
  </view>
  <view class="text-cut margin-top-sm">
    <text>备注：</text>
    <text class="sub-text">{{ item.remark || '-' }}</text>
  </view>
  <view class="flex justify-between margin-top-sm">
    <view>
      <van-tag plain type="{{ statusTypeMap[item.status] }}">{{ statusMap[item.status] }}</van-tag>
    </view>
    <!-- 我的工单 -->
    <view wx:if="{{ from === 'work' }}">
      <van-button wx:if="{{ item.type === 'produce' }}" type="info" bind:click="openDialog" data-id="{{ item.id }}" size="small">撤销工单</van-button>
      <van-button type="default" bind:tap="goToDetail" data-id="{{ item.id }}" size="small" class="margin-left-xs">查看详情</van-button>
    </view>
    <!-- 工单池 -->
    <view wx:elif="{{ from === 'today' }}">
      <van-button type="info" bind:click="openDialog" data-id="{{ item.id }}" size="small" wx:if="{{ item.canReceive }}">认领工单</van-button>
      <van-button type="default" bind:tap="goToDetail" data-id="{{ item.id }}" size="small" class="margin-left-xs">查看详情</van-button>
    </view>
    <!-- 执行总览 -->
    <view wx:elif="{{ from === 'situation' }}">
      <van-button type="default" bind:tap="goToDetail" data-id="{{ item.id }}" size="small">查看详情</van-button>
    </view>
    <!-- 维修派单 -->
    <view wx:elif="{{ from === 'dispatch' }}">
      <van-button type="danger" bind:tap="openResetDialog" data-id="{{ item.id }}" size="small">重置派单</van-button>
      <van-button type="warning" bind:tap="openDialog" data-id="{{ item.id }}" class="margin-left-xs" size="small">撤销派单</van-button>
      <van-button type="info" bind:tap="goToDetail" data-id="{{ item.id }}" class="margin-left-xs" size="small" wx:if="{{ item.canReceive }}">手动派单</van-button>
      <van-button type="default" bind:tap="goToDetail" data-id="{{ item.id }}" class="margin-left-xs" size="small" wx:else>查看详情</van-button>
    </view>
  </view>
</view>
<view wx:else class="work-box">
  <view class="text-cut">
    <text class="title-dashboard">{{ item.name }}</text>
  </view>
  <view class="text-cut margin-top-sm">
    <text>产品名称：</text>
    <text class="sub-text">{{ item.productInfo.name }}</text>
  </view>
  <view class="flex justify-between margin-top-sm">
    <view class="text-cut">
      <text>数量：</text>
      <text class="sub-text">{{ item.count }}</text>
    </view>
    <van-button
      type="default"
      bind:tap="goToDetail"
      data-id="{{ item.id }}"
      size="small"
    >查看进度</van-button>
  </view>
</view>